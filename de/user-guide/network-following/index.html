<!DOCTYPE html>
<html class="writer-html5" lang="de" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.5. Werkzeuge zur Netzwerkverfolgung &mdash; QGEP 0.8 Dokumentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/translations.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Stichwortverzeichnis" href="../../genindex.html" />
    <link rel="search" title="Suche" href="../../search.html" />
    <link rel="next" title="3.6. Plandruck" href="../plan-plotting/index.html" />
    <link rel="prev" title="3.4. Längsschnitte" href="../length-profile/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            QGEP
          </a>
              <div class="version">
                0.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Dokumentation durchsuchen" aria-label="Dokumentation durchsuchen" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../features-guide/index.html">1. TEKSI wastewater module (QGEP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation-guide/index.html">2. Leitfaden QGEP Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">3. QGEP Benutzerhandbuch</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../layerexplanations/index.html">3.1. Übersicht über QGEP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../digitizing/index.html">3.2. Digitalisieren in QGEP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../editing/index.html">3.3. Bearbeiten in QGEP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../length-profile/index.html">3.4. Längsschnitte</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.5. Werkzeuge zur Netzwerkverfolgung</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#refresh-network-topology">3.5.1. Netzwerk Topologie aktualisieren</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upstream">3.5.2. Gegen die Fließrichtung</a></li>
<li class="toctree-l3"><a class="reference internal" href="#downstream">3.5.3. In Fließrichtung</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sum-up-upstream">3.5.4. Summieren gegen die Fließrichtung</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flow-times-downstream">3.5.5. Fliesszeiten abwärts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plan-plotting/index.html">3.6. Plandruck</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/index.html">3.7. History in QGEP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To/index.html">3.8. How To</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">4. Administratorhandbuch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">5. Demo virtuelle Maschine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wincan2qgep/index.html">6. Wincan 2 QGEP plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qgep_swmm/index.html">7. QGEP SWMM plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../translation/index.html">8. Übersetzungen</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QGEP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html"><span class="section-number">3. </span>QGEP Benutzerhandbuch</a></li>
      <li class="breadcrumb-item active"><span class="section-number">3.5. </span>Werkzeuge zur Netzwerkverfolgung</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/user-guide/network-following/index.rst.txt" rel="nofollow"> Quelltext anzeigen</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="network-following-tools">
<h1><span class="section-number">3.5. </span>Werkzeuge zur Netzwerkverfolgung<a class="headerlink" href="#network-following-tools" title="Permalink to this heading"></a></h1>
<section id="refresh-network-topology">
<h2><span class="section-number">3.5.1. </span>Netzwerk Topologie aktualisieren<a class="headerlink" href="#refresh-network-topology" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Bevor die Netzwerk-Verfolgungs-Werkzeuge verwendet werden können, muss die Netzwerk Topologie aktualisiert sein</p></li>
<li><p>Um die Netzwerk Topologie zu aktualisieren, klicke das  <strong>Refresh network topology</strong> Werkzeug (Knopf mit SQL und dem Wassertropf)</p></li>
<li><p>Wenn die Aktualisierung erfolgreich ist, erscheint eine Meldung: <strong>Success: Network successfully updated</strong></p></li>
</ul>
</section>
<section id="upstream">
<h2><span class="section-number">3.5.2. </span>Gegen die Fließrichtung<a class="headerlink" href="#upstream" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Es spielt keine Rolle, welcher Layer ausgewählt ist</p></li>
<li><p>Um einen Netzwerk Verfolgung gegen die Fließrichtung zu starten wählen Sie den <strong>Upstream</strong> Knopf</p></li>
</ul>
<figure class="align-default">
<img alt="../../_images/network_upstream_button.jpg" src="../../_images/network_upstream_button.jpg" />
</figure>
<ul class="simple">
<li><p>QGEP öffnet das Profil Fenster im unteren Teil des Kartenfensters. Klick auf deinen Start-Abwasserknoten.</p></li>
<li><p>Wenn mehr als einen Abwasserknoten in der Nähe vorhanden ist, kann der gewünschte Knoten aus einer Liste ausgewählt werden</p></li>
</ul>
<div class="admonition attention">
<p class="admonition-title">Achtung</p>
<p>Mit dem QGEPPlugin 1.1.8 / QGIS 3.4.2 ist es empfehlenswert, soweit hinein zu zoomen, dass der Start-Knoten direkt angeklickt werden kann. Wenn ein Knoten aus der Liste ausgewählt werden muss, können unerwartete Resultate eintreten.</p>
</div>
<figure class="align-default">
<img alt="../../_images/network_select_start_node.jpg" src="../../_images/network_select_start_node.jpg" />
</figure>
<ul class="simple">
<li><p>Nach ein paar Sekunden werden alle Elemente gegen die Fließrichtung hervorgehoben und Sie können sehen, woher das Wasser kommt</p></li>
<li><p>Wenn die graphisch markierten Haltungen als Auswahl selektiert werden soll, dann klicke auf den Knopf <strong>Select current path</strong> im Profil Fenster</p></li>
</ul>
<figure class="align-default">
<img alt="../../_images/network_select_currentpath.jpg" src="../../_images/network_select_currentpath.jpg" />
</figure>
<ul class="simple">
<li><p>Du kannst dann mit der Auswahl in der Haltungs-Attributtabelle weiterarbeiten oder auf die selektierten Haltungen zoomen (wenn der Layer  vw_qgep_reach selektiert ist)</p></li>
<li><p>Benutzen Sie dieses Werkzeug um zu überprüfen, ob Ihr Topologie-Netzwerk korrekt ist</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Im Knopf <strong>Select current path</strong> gibt es das Menu <strong>Configure Select</strong>. Das ist vorbereitet, damit später nicht nur die Haltungen, sondern auch die Einzugsgebiete, welche mit den Haltungen resp. den Abwasserknoten verknüpft sind, ausgewählt werden können. Diese Funktion ist im QGEPPlugin 1.1.8 noch nicht implementiert.</p>
</div>
</section>
<section id="downstream">
<h2><span class="section-number">3.5.3. </span>In Fließrichtung<a class="headerlink" href="#downstream" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Netzverfolgung in Fliessrichtung funktioniert gleich wie die oben beschriebene Netzverfolgung gegen die Fliessrichtung.</p></li>
</ul>
<figure class="align-default">
<img alt="../../_images/network_downstream_button.jpg" src="../../_images/network_downstream_button.jpg" />
</figure>
<ul class="simple">
<li><p>Du siehst, wohin das Wasser fliessen wird.</p></li>
<li><p>Kontrolliere ob QGEP auch die Überlauf findet</p></li>
<li><p>Benutzen Sie diese Funktion, um zu überprüfen ob Ihr Topologie- Netzwerk korrekt ist oder herauszufinden wo Sie Fehler beheben können.</p></li>
</ul>
</section>
<section id="sum-up-upstream">
<span id="sumupupstream"></span><h2><span class="section-number">3.5.4. </span>Summieren gegen die Fließrichtung<a class="headerlink" href="#sum-up-upstream" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Ein Tool in der QGEP-Werkzeugkiste.</p></li>
<li><p>Mit diesem Tool kann ein Wert über ein ganzes Kanalnetz summiert werden, z. Bsp. die Fliesszeit von jedem Punkt bis zum Auslass aus dem Kanalnetz.</p></li>
<li><p>Für dieses Tool ist ein Feld im Layer vw_qgep_reach notwendig, welches die zu summierenden Werte enthält. Weil interessierende Werte normalerweise nicht im Layer vorhanden sind, muss das Feld (z. Bsp. die Fliesszeit oder die Fliessgeschwindigkeit) an den Layer vw_qgep_reach verknüpft (join) werden.</p></li>
<li><p>Als Beispiel hier ein kleines Netzwerk, beschriftet mit Haltungs-Bezeichnung, Länge und Fliessrichtungspfeil.</p></li>
</ul>
<figure class="align-default">
<img alt="../../_images/sumupupstream-example.jpg" src="../../_images/sumupupstream-example.jpg" />
</figure>
<ul class="simple">
<li><p>Es braucht eine Tabelle (im Beispiel heisst sie sum up tool) mit mindestens zwei Feldern: Feld identifier als Verknüpfungsfeld und das Feld flow rate (im Beispiel die Fliessgeschwindigkeit in [m/s]) als verknüpftes Feld, dass summiert wird.</p></li>
<li><p>Im Layer vw_qgep_reach die Einstellungen öffnen, dort <strong>Verknüpfungen</strong> und <strong>Neue Verknüpfung hinzufügen</strong> (grüner + Knopf) wählen. Die Verknüpfung mit dem Verknüpfungsfeld (identifier) und dem verknüpften Feld (Feld das summiert werden soll) definieren.</p></li>
</ul>
<figure class="align-default">
<img alt="../../_images/sumupupstream-join1.jpg" src="../../_images/sumupupstream-join1.jpg" />
</figure>
<ul class="simple">
<li><p>Starten sie mit Doppelklick auf das <strong>Sum up upstream</strong> Tool</p></li>
</ul>
<figure class="align-default">
<img alt="../../_images/toolbox1.jpg" src="../../_images/toolbox1.jpg" />
</figure>
<figure class="align-default">
<img alt="../../_images/qgep_toolbox1.jpg" src="../../_images/qgep_toolbox1.jpg" />
</figure>
<ul class="simple">
<li><p>Im Fenster muss folgendes eingegeben/gewählt werden</p>
<ul>
<li><p>einen Ausdruck gemäss dem Titel des Feldes (COALESCE(„field_name“,0). Wenn der <strong>coalesce</strong> Befehl nicht verwendet wird, gibt es bei der Ausführung des Tools einen Fehler, wenn sich im zu summierenden Feld ein NULL-Wert befindet. In der Abbildung ist als Beispiel die Berechnung der Fliesszeit in [Minuten], berechnet aus der Länge effektiv und der Fliessgeschindigkeit in [m/s].</p></li>
<li><p>das Verhalten bei Verzweigungen (Minimum, Maximum, Durchschnitt): welcher Wert wird für die weiter Summierung verwendet, wenn zwei Äste des Kanalnetzes zusammenkommen.</p></li>
<li><p>die erweiterten Parameter sind für QGEP bereits vorkonfiguriert und sollten nicht geändert werden.</p></li>
<li><p>Summed up: Bleibt das Feld leer wird im Projekt ein temporärer Punkt-Layer mit den Resultaten erstellt. Oder sie können in diesem Feld das Resultat in einen Punkt-Vektorlayer speichern.</p></li>
</ul>
</li>
</ul>
<figure class="align-default">
<img alt="../../_images/sumupupstream-tool.jpg" src="../../_images/sumupupstream-tool.jpg" />
</figure>
<p>Der resultierende Punkt-Layer hat die Felder des vw_wastewater_node Layer und ein ein zusätzliches Feld <strong>value</strong> mit der Summe für jeden Abwasserknoten. In der Abbildung ist das Resultat des Beispiels mit allen drei Verzweigungsverhalten dargestellt: Minimum = normaler Text, Maximum = fett, Durchschnitt = unterstrichen.</p>
<figure class="align-default">
<img alt="../../_images/sumupupstream-resultat.jpg" src="../../_images/sumupupstream-resultat.jpg" />
</figure>
</section>
<section id="flow-times-downstream">
<h2><span class="section-number">3.5.5. </span>Fliesszeiten abwärts<a class="headerlink" href="#flow-times-downstream" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Ein Tool in der QGEP-Werkzeugkiste.</p></li>
<li><p>Die Idee für dieses Tool: Berechne die Fliesszeit zwischen einem Startpunkt (hier ist z.B. ein Unfall) und einem Abwasserbauwerk unterhalb. Es ist nicht die Idee einen Fliesszeitenplan für ein ganzes Abwassernetz mit diesem Tool zu erstellen (für diese Aufgabe kann das Summieren gegen die Fliessrichtung-Tool verwendet werden).</p></li>
<li><p>Für diese Tool braucht es einen Layer (eine Tabelle) im QGEP-Projekt mit der Fliesszeit und der Obj-ID der Haltungen.</p></li>
<li><p>Die Starthaltung (wo der Unfall passiert ist) muss im vw_qgep_reach - Layer selektiert werden</p></li>
<li><p>Starten sie mit Doppelklick auf das <strong>Flow times downstream</strong> Tool</p></li>
</ul>
<figure class="align-default">
<img alt="../../_images/toolbox1.jpg" src="../../_images/toolbox1.jpg" />
</figure>
<figure class="align-default">
<img alt="../../_images/qgep_toolbox1.jpg" src="../../_images/qgep_toolbox1.jpg" />
</figure>
<ul class="simple">
<li><p>Im Toolfenster muss gewählt werden</p>
<ul>
<li><p>als reach layer: vw_qgep_reach</p></li>
<li><p>als flow time layer: die Tabelle mit der Haltungs Obj_ID und den Fliesszeiten (oder dem Wert, der aufsummiert werden soll)</p></li>
<li><p>als reach id field: das Feld in der Tabelle mit der Obj_ID der Haltung</p></li>
<li><p>als Flow times field: das Feld aus der Tabelle, dass aufsummiert werden soll</p></li>
<li><p>als Flow times: wenn sie das Feld leer lassen wird ein temporärer Layer im Projekt erstellt. Oder sie können in diesem Feld das Resultat in einen Vektorlayer speichern.</p></li>
</ul>
</li>
</ul>
<figure class="align-default">
<img alt="../../_images/flow_time_downstream_window.jpg" src="../../_images/flow_time_downstream_window.jpg" />
</figure>
<ul class="simple">
<li><p>Das Tool macht eine Netzverfolgung in Fliessrichtung ab der selektierten Haltung und erzeugt für jede Haltung einen Datensatz im (temporären) Vektor-Layer mit nur einem Feld (der Summe der Werte im flow times field).</p></li>
</ul>
<figure class="align-default">
<img alt="../../_images/flow_time_downstream_result.jpg" src="../../_images/flow_time_downstream_result.jpg" />
</figure>
<div class="admonition attention">
<p class="admonition-title">Achtung</p>
<p>Wenn es mehr als einen Abwärts - Fliessweg gibt, sind die Resultate nach der Verzweigung falsch.</p>
</div>
<ul class="simple">
<li><p>Es gibt Fälle, bei denen ein leerer flow time - Layer und roter (Fehler-)Text im Log-Fenster resultieren:</p>
<ul>
<li><p>Nicht mehr als eine Haltung als Start selektieren</p></li>
<li><p>vw_qgep_reach nicht als Flow time layer auswählen (um die Länge der Haltungen zu summieren, kann der vw_network_segment - Layer verwendet werden)</p></li>
<li><p>Wenn im reach id Feld kein Wert vorhanden ist, der zu der Haltungs Obj_ID passt, gibt es einen Fehler</p></li>
</ul>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../length-profile/index.html" class="btn btn-neutral float-left" title="3.4. Längsschnitte" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Zurück</a>
        <a href="../plan-plotting/index.html" class="btn btn-neutral float-right" title="3.6. Plandruck" accesskey="n" rel="next">Weiter <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, The QGEP Project www.qgis.ch/en/projects/qgep-waste-water-module.</p>
  </div>

  Erstellt mit <a href="https://www.sphinx-doc.org/">Sphinx</a> mit einem
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    bereitgestellt von <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>