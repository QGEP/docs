<!DOCTYPE html>
<html class="writer-html5" lang="it" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.8. How To &mdash; QGEP 0.8 documentazione</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/translations.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Indice" href="../../genindex.html" />
    <link rel="search" title="Cerca" href="../../search.html" />
    <link rel="next" title="4. Admin Guide" href="../../admin-guide/index.html" />
    <link rel="prev" title="3.7.1. History viewer" href="../history/history.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> QGEP
          </a>
              <div class="version">
                0.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Cerca documenti" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Menu di navigazione">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../features-guide/index.html">1. QGEP / TEKSI wastewater module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation-guide/index.html">2. QGEP Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">3. QGEP User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../layerexplanations/index.html">3.1. Overview of QGEP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../digitizing/index.html">3.2. Digitizing in QGEP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../editing/index.html">3.3. Editing in QGEP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../length-profile/index.html">3.4. Length profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network-following/index.html">3.5. Network following tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plan-plotting/index.html">3.6. Plan plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/index.html">3.7. History in QGEP</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.8. How To</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#manual-label-positioning-for-different-scales">3.8.1. Manual Label-positioning for different scales</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-import-existing-label-positions">3.8.2. How to import existing label-positions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collecting-a-hydr-geometry-corresponds-to-a-basin-geometry-in-mikeurban">3.8.3. Collecting a hydr_geometry (corresponds to a basin geometry in MikeUrban)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hydraulic-modeling-of-an-overflow-prank-weir-leapingweir-pump">3.8.4. Hydraulic modeling of an overflow (prank weir / leapingweir / pump)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#overflow-characteristic">3.8.5. Overflow characteristic</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">4. Admin Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">5. Demo Virtual Machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wincan2qgep/index.html">6. Wincan 2 QGEP plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qgep_swmm/index.html">7. QGEP SWMM plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../translation/index.html">8. Translation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Menu navigazione dispositivi mobili" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QGEP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Naviga tra le pagine">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html"><span class="section-number">3. </span>QGEP User Guide</a> &raquo;</li>
      <li><span class="section-number">3.8. </span>How To</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/user-guide/How-To/index.rst.txt" rel="nofollow"> Visualizza sorgente pagina</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="how-to">
<h1><span class="section-number">3.8. </span>How To<a class="headerlink" href="#how-to" title="Link a questa intestazione"></a></h1>
<p>This represents a guide on different themes about configuring in QGEP.</p>
<section id="manual-label-positioning-for-different-scales">
<h2><span class="section-number">3.8.1. </span>Manual Label-positioning for different scales<a class="headerlink" href="#manual-label-positioning-for-different-scales" title="Link a questa intestazione"></a></h2>
<p>QGIS label definition can handle different labels for different scales. This works very well if you work on the screen.
If you have to print plans with labels or if you have to export labels for data exchange (e.g. exchange with RegioGIS-platform), it will often be necessary to determine the label positions manually.
If a label is positioned manually in QGIS, this fixed position applies to every scale. And that’s not always a good result.</p>
<p>Solution</p>
<ul class="simple">
<li><p>Extend the Auxiliary Storage File with new fields for different labelpositions</p></li>
<li><p>Use Rule-based labeling, then you can define different labelpositions for every rule</p></li>
</ul>
<p>In the example below, we want to label the wastewater-structures with a detailed label for network_plan (1:500) and for overviewmap (1:2000).
In the Auxiliary Storage we use the standard fields PositionX and PositionY for the  network_plan labels. For the overviewmap labels we add two new fields.
We name this fields posx2000 and posy2000.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_newfields.jpg" src="../../_images/man_labeling_newfields.jpg" />
</figure>
<p>Define now rule-based labeling with two rules. In the example the first rule is called WP-Labels (WP = Werkplan = network_plan).
You have not the change something in the placement, because this rule uses the standard positioning-fields.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_rules.jpg" src="../../_images/man_labeling_rules.jpg" />
</figure>
<p>The second rule is called UP-Labels (UP = Uebersichtsplan = overviewmap). In this rule, you have to change the coordinate fields in the placement-tab.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_edit_rules.jpg" src="../../_images/man_labeling_edit_rules.jpg" />
</figure>
<figure class="align-default">
<img alt="../../_images/man_labeling_coordinatefield.jpg" src="../../_images/man_labeling_coordinatefield.jpg" />
</figure>
<p>Click on Coordinate X menutool and choose in the field type-menu the auxiliary_storage_user_custom_posx2000 field. Then the similar for Y.</p>
<div class="admonition attention">
<p class="admonition-title">Attenzione</p>
<p>Do not use the <strong>Edit…</strong> menu for defining the coordinate-field. If you use a formula or choose the field via the Edit… menu, QGIS will overwrite the definition everytime you do a manual positioning.</p>
</div>
<p>Now you can move or fix your labels for every rule with different positions with the QGIS <strong>Moves a Label or Diagram</strong>-Tool.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_labeltools.jpg" src="../../_images/man_labeling_labeltools.jpg" />
</figure>
<div class="admonition attention">
<p class="admonition-title">Attenzione</p>
<p>Your changes are only saved if you save the QGIS-project!</p>
</div>
</section>
<section id="how-to-import-existing-label-positions">
<h2><span class="section-number">3.8.2. </span>How to import existing label-positions<a class="headerlink" href="#how-to-import-existing-label-positions" title="Link a questa intestazione"></a></h2>
<p>Good label-positions can be hard work. So you don’t want to loose it.</p>
<ul class="simple">
<li><p>Export your label-positions from your old system in the form obj_id, coordinateX (east), coordinateY (north).</p></li>
<li><p>Add the <strong>.qgd</strong>-file of your project with <strong>Add Vector Layer…</strong> to your project and open the attribute table.</p></li>
</ul>
<figure class="align-default">
<img alt="../../_images/man_labeling_auxtable.jpg" src="../../_images/man_labeling_auxtable.jpg" />
</figure>
<p>If you can not find a .qgd-file, then you have probably not moved or rotated a label before.</p>
<ul class="simple">
<li><p>Change the field-names in your export-data to the field-names in the qgd-file. In the example the obj_id-field must have the name <strong>ASPK</strong>, the coordinate-fields must have the names <strong>labeling_positionx</strong> and <strong>labeling_positiony</strong>.</p></li>
<li><p>Open the export-file in the QGIS-project and copy the rows you want to the table of the qgd-file (this file must be editable).</p></li>
<li><p>Save the qgd-file and remove it from your project, before you remove labels, because QGIS can not save manual label-positions, if the qgd-file is a layer in the project.</p></li>
<li><p>If necessary define the horizontal/vertical alignment of your label-coordinates in the placement of the label definition.</p></li>
</ul>
</section>
<section id="collecting-a-hydr-geometry-corresponds-to-a-basin-geometry-in-mikeurban">
<h2><span class="section-number">3.8.3. </span>Collecting a hydr_geometry (corresponds to a basin geometry in MikeUrban)<a class="headerlink" href="#collecting-a-hydr-geometry-corresponds-to-a-basin-geometry-in-mikeurban" title="Link a questa intestazione"></a></h2>
<p>Note:</p>
<ul class="simple">
<li><p>Wastewater structures with a hydr_geometry have to be defined as special structures (and not as standard manholes).</p></li>
<li><p>The detail geometry can be graphically drawn with the <strong>Digitize action</strong>.</p></li>
</ul>
<p>Action:</p>
<ol class="arabic simple">
<li><p>Select the wastewater structure with the i-button</p></li>
<li><p>Select the wastewater nodes tab in the Feature Attributes window</p></li>
<li><p>Select a hydr_geometry in the fk_hydr_geometry field or use the + button to create a new hydr_geometry.</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/hydr_geometry1.jpg" src="../../_images/hydr_geometry1.jpg" />
</figure>
<ol class="arabic simple" start="4">
<li><p>Enter a description in the hydr_geometry - Feature Attributes window. This name is also the name of the table in MikeUrban.</p></li>
<li><p>Before you can create a hydr: geom_relation, the new record hydr_geometry must be saved: -&gt; click OK</p></li>
<li><p>Go back to the hydr_geometry you just created with the button <strong>switch to form view</strong> in the field fk_hydr_geometry .</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/hydr_geometry2.jpg" src="../../_images/hydr_geometry2.jpg" />
</figure>
<ol class="arabic simple" start="7">
<li><p>With the <strong>Add child object</strong> button, you can now generate the records with which the hydr_geometry is defined analogously to the basin geometry of MikeUrban (H, As surface, Ac cross-sectional area).</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/hydr_geometry3.jpg" src="../../_images/hydr_geometry3.jpg" />
</figure>
<p>Note:</p>
<ul class="simple">
<li><p>The water depth is the value above the bottom level or the outlet. A hydr_geometry can thus be used for several wastewater structure if they are built similar.</p></li>
<li><p>In the table view, the overview of the values is easier.</p></li>
</ul>
</section>
<section id="hydraulic-modeling-of-an-overflow-prank-weir-leapingweir-pump">
<h2><span class="section-number">3.8.4. </span>Hydraulic modeling of an overflow (prank weir / leapingweir / pump)<a class="headerlink" href="#hydraulic-modeling-of-an-overflow-prank-weir-leapingweir-pump" title="Link a questa intestazione"></a></h2>
<p>Action:</p>
<p>In the case of weirs, a second sewage junction has to be created in the wastewater structure.
A second outlet has already been created (green = discharged combined wastewater) and has not yet been linked to any wastewater node in the overflow structure.</p>
<ol class="arabic simple">
<li><p>Select the wastewater structure with the i-button</p></li>
<li><p>Select the wastewater nodes tab in the Feature Attributes window</p></li>
<li><p>Create a second wastewater node with the <strong>Add point child object</strong> button. The light blue note at the top of the map tells you what to do!</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/overflow1.jpg" src="../../_images/overflow1.jpg" />
</figure>
<ol class="arabic simple" start="4">
<li><p>Click next to outlet 2 to place the second wastewater node.</p></li>
<li><p>The Feature Attributes window for this wastewater node appears. Enter a meaningful identifier (e.g. BSP001-WN2 for wastewater node 2 of the BSP001 special structure). This designation also appears in MikeUrban. The new wastewater node is saved with OK.</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/overflow2.jpg" src="../../_images/overflow2.jpg" />
</figure>
<p>In the next picture, the 2nd node is marked in yellow on the map and in the Feature Attributes window.</p>
<figure class="align-default">
<img alt="../../_images/overflow3.jpg" src="../../_images/overflow3.jpg" />
</figure>
<p>We define now a prank weir:</p>
<ol class="arabic simple" start="6">
<li><p>Choose prank weir in the overflow tabs</p></li>
<li><p>Create a weir with the <strong>Add child object</strong> button</p></li>
</ol>
<p>The prank weir Feature Attributes window opens. The attributes in the upper hydraulic section must be filled in, they will be transferred to MikeUrban.
The field fk_overflow_to must be filled manually. The Obj_ID of the previously created second wastewater node can be seen in the rear window.</p>
<figure class="align-default">
<img alt="../../_images/overflow4.jpg" src="../../_images/overflow4.jpg" />
</figure>
<p>This information is sufficient for the calculation in MikeUrban with the weir formula.</p>
<p>Now only the 2nd outlet has to be linked to the 2nd wastewater node:</p>
<p>Close all open Feature Attributes window.</p>
<ol class="arabic simple">
<li><p>Select the QGEP tool <strong>Connect wastewater networkelements</strong>.</p></li>
<li><p>Click on the reach near to the outlet</p></li>
<li><p>Click on the wastewater node</p></li>
<li><p>Confirm that the connection is created for the <strong>from reach point</strong>.</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/connect_2_node.jpg" src="../../_images/connect_2_node.jpg" />
</figure>
</section>
<section id="overflow-characteristic">
<h2><span class="section-number">3.8.5. </span>Overflow characteristic<a class="headerlink" href="#overflow-characteristic" title="Link a questa intestazione"></a></h2>
<p>In the case of a leaping weir, a pump or under special conditions, an overflow characteristic can be defined for the overflow:</p>
<p>You can select an existing characteristic in the field fk_overflow_char or you creat a new one characteristic with the green + button.</p>
<p>The Feature Attributes window for the overflow characteristic appears:</p>
<figure class="align-default">
<img alt="../../_images/overflow_char1.jpg" src="../../_images/overflow_char1.jpg" />
</figure>
<ol class="arabic simple">
<li><p>Here too, the identifer is later adopted in MikeUrban as a table name for a QH relationship, which is used, for example, in a local controller.</p></li>
<li><p>Because the new record overflow characteristic has not yet been saved, it must first be saved with OK before the records of the HQ relation can be created.</p></li>
<li><p>Go back in the field fk_overflow characteristic of the just created overflow characteristic with the button <strong>switch to form view</strong> and define the necessary HQ or QQ values with the <strong>add child object</strong> button.</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Piè di pagina">
        <a href="../history/history.html" class="btn btn-neutral float-left" title="3.7.1. History viewer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Precedente</a>
        <a href="../../admin-guide/index.html" class="btn btn-neutral float-right" title="4. Admin Guide" accesskey="n" rel="next">Prossimo <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, The QGEP Project www.qgis.ch/en/projects/qgep-waste-water-module.</p>
  </div>

  Realizzato con <a href="https://www.sphinx-doc.org/">Sphinx</a> e il tema
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    fornito da <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>